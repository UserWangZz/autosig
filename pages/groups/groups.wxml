<cu-custom bgColor="bg-gradual-blue" isBack='true'>
  <view slot="content">我的群组</view>
  <view slot="backText">返回</view>
</cu-custom>

<view class='box'>
  <view class="cu-bar justify-right bg-white">
    <view class="action border-title">
      <text class="text-xl text-bold text-blue">加入群组</text>
      <text class="bg-gradual-blue" style="width:3rem"></text>
    </view>
  </view>

  <view class="cu-bar bg-white search">
    <view class="search-form">
      <text class="cuIcon-search"></text>
      <input type="text" placeholder="输入群组的关键字" confirm-type="search" bindinput='bindSearchInput'></input>
    </view>
    <view class="action">
      <button class="cu-btn bg-gray.light" bindtap="onSearch">搜索</button>
    </view>
  </view>

  <scroll-view scroll-y class="indexes" scroll-into-view="indexes-{{listCurID}}" style="height:calc(100vh - {{CustomBar}}px - 50px)" scroll-with-animation="true" enable-back-to-top="true">
    <block wx:if="{{lenSearchResults>0}}">
      <view class="padding indexItem-A" id="0" data-index="0">搜索结果</view>
      <view class="cu-list menu-avatar no-padding">
        <block wx:for="{{searchResults}}" wx:key>
          <view class="cu-item">
            <view class="cu-avatar round lg">G</view>
            <view class="content">
              <view class="text-grey">
                <text class="text-abc">{{searchResults[index].name}}</text>
              </view>
              <view class="text-gray text-sm">
                {{searchResults[index].desc}} {{searchResults[index].place}}
              </view>
            </view>
          </view>
        </block>
      </view>
    </block>

    <block wx:if="{{lenNearbyGroups>0}}">
      <view class="padding indexItem-A" id="0" data-index="0">附近的群组</view>
      <view class="cu-list menu-avatar no-padding">
        <block wx:for="{{nearbyGroups}}" wx:key>
          <view class="cu-item">
            <view class="cu-avatar round lg">G</view>
            <view class="content">
              <view class="text-grey">
                <text class="text-abc">{{nearbyGroups[index].name}}</text>
              </view>
              <view class="text-gray text-sm">
                {{nearbyGroups[index].desc}} {{nearbyGroups[index].place}}
              </view>
            </view>
          </view>
        </block>
      </view>
    </block>

    <block wx:if="{{lenAttendedGroups>0}}">
      <view class="padding indexItem-A" id="0" data-index="0">已加入的群组</view>
      <view class="cu-list menu-avatar no-padding">
        <block wx:for="{{createdGroups}}" wx:key>
          <view class="cu-item">
            <view class="cu-avatar round lg bg-cyan">G</view>
            <view class="content">
              <view class="text-grey">
                <text class="text-abc">{{createdGroups[index].name}}</text>
              </view>
              <view class="text-gray text-sm">
                {{createdGroups[index].desc}} {{createdGroups[index].place}}
              </view>
            </view>
          </view>
        </block>
      </view>
    </block>
    

  </scroll-view>

  <view class="cu-bar justify-right bg-white margin-top">
    <view class="action border-title">
      <text class="text-xl text-bold text-blue">创建群组</text>
      <text class="bg-gradual-blue" style="width:3rem"></text>
    </view>
  </view>
  <form>
    <view class="cu-form-group">
      <view class="title">名称</view>
      <input placeholder="输入群组名称" bindinput="bindGroupNameInput"></input>
      <text class="cuIcon-info"></text>
    </view>
    <view class="cu-form-group align-start">
      <view class="title">简介</view>
      <textarea maxlength="-1" disabled="{{modalName!=null}}" bindinput="textareaBInput" placeholder="输入群组描述（100字以内）" bindinput="bindGroupDescInput"></textarea>
    </view>
    <view class="cu-form-group justify-right">
      <button class="cu-btn round lines-cyan shadow"role="button"aria-label=""aria-disabled="false" bindtap='onAddGroup'>创建群组</button>
    </view>
  </form>

  <block wx:if="{{lenCreatedGroups>0}}">
    <view class="padding indexItem-A" id="0" data-index="0">创建的群组</view>
    <view class="cu-list menu-avatar no-padding">
      <block wx:for="{{createdGroups}}" wx:key>
        <view class="cu-item">
          <view class="cu-avatar round lg bg-blue">G</view>
          <view class="content">
            <view class="text-grey">
              <text class="text-abc">{{createdGroups[index].name}}</text>
            </view>
            <view class="text-gray text-sm">
              {{createdGroups[index].desc}} {{createdGroups[index].place}}
            </view>
          </view>
        </view>
      </block>
    </view>
  </block>
  
</view>
